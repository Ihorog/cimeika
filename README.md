# Cimeika

Welcome to the Cimeika project! This repository contains the source code and resources for the Cimeika application.

## Setting up JDK 21

To set up JDK 21 for the project, follow these steps:

1. Ensure you have the required Gradle files in the repository.
2. Update the GitHub Actions workflow to include a `check-out` step before setting up JDK 21.
3. Add a step to ensure the required Gradle files are present in the repository.

### Importance of Required Gradle Files

It is important to have the required Gradle files in the repository to ensure the setup process completes successfully. The `setup-java` action attempts to cache Gradle files, and if no matching files are found, the setup process will fail.

### Detailed Steps to Ensure Required Gradle Files are Present

1. **Check for Gradle Files**: Ensure that the `build.gradle` and `settings.gradle` files are present in the root directory of your project. These files are essential for the Gradle build system to function correctly.

2. **Add Gradle Wrapper**: If not already present, add the Gradle wrapper to your project. The Gradle wrapper is a script that allows you to run a specific version of Gradle without requiring the user to install Gradle manually. You can add the Gradle wrapper by running the following command in your project directory:
   ```sh
   gradle wrapper
   ```

3. **Verify Gradle Wrapper Files**: Ensure that the `gradlew` script and the `gradle/wrapper/gradle-wrapper.properties` file are present in your project. These files are generated by the Gradle wrapper and are necessary for running Gradle tasks.

4. **Commit Gradle Files**: Make sure to commit all the Gradle files (`build.gradle`, `settings.gradle`, `gradlew`, and `gradle/wrapper/gradle-wrapper.properties`) to your version control system (e.g., Git). This ensures that all team members and CI/CD pipelines have access to the required Gradle files.

5. **Update GitHub Actions Workflow**: Update your GitHub Actions workflow to include steps that check for the presence of the required Gradle files. Here is an example of how you can update your workflow:
   ```yaml
   name: Android CI

   on:
     push:
       branches: [ "main" ]
     pull_request:
       branches: [ "main" ]

   jobs:
     build:

       runs-on: ubuntu-latest

       steps:
       - uses: actions/checkout@v3

       - name: Ensure required Gradle files are present
         run: |
           if [ ! -f "build.gradle" ] || [ ! -f "settings.gradle" ]; then
             echo "Required Gradle files are missing"
             exit 1
           fi

       - name: Ensure actual gradlew file is present
         run: |
           if [ ! -f "gradlew" ]; then
             echo "gradlew file is missing"
             exit 1
           fi

       - name: Set up JDK 21
         uses: actions/setup-java@v3
         with:
           java-version: '21'
           distribution: 'temurin'
           cache: gradle

       - name: Grant execute permission for gradlew
         run: chmod +x gradlew

       - name: Build with Gradle
         run: ./gradlew build

       - name: Run unit tests
         run: ./gradlew test
   ```

By following these detailed steps, you can ensure that the required Gradle files are present in your project and that your GitHub Actions workflow is correctly configured to use them.

## Setting Environment Variables for API Keys

To improve security, replace hardcoded API keys with environment variables. Follow these steps to set up environment variables for API keys:

1. **Set Environment Variables in Dockerfile**: Ensure that the `Dockerfile` sets the environment variables for the API keys. Here is an example:
   ```dockerfile
   # Set environment variables for API keys
   ENV OPENWEATHERMAP_API_KEY=""
   ENV FREEASTROLOGYAPI_API_KEY=""
   ```

2. **Use Environment Variables in `app.py`**: Update the `app.py` file to use the environment variables for the API keys. Here is an example:
   ```python
   import os

   api_key = os.getenv('OPENWEATHERMAP_API_KEY')
   ```

3. **Set Environment Variables Locally**: When running the application locally, set the environment variables in your terminal or development environment. Here is an example for setting environment variables in a Unix-based terminal:
   ```sh
   export OPENWEATHERMAP_API_KEY="your_openweathermap_api_key"
   export FREEASTROLOGYAPI_API_KEY="your_freeastrologyapi_api_key"
   ```

By following these steps, you can ensure that the API keys are securely managed using environment variables.

## Verifying Component Dependencies

To verify the dependencies of all components, you can use the new `/components/verify` endpoint. This endpoint checks all component dependencies and returns a status indicating whether the dependencies are verified.

### Using the `/components/verify` Endpoint

1. **Endpoint URL**: `/components/verify`
2. **Method**: GET
3. **Response**:
   - `dependencies_verified`: A boolean indicating whether the dependencies are verified.

### Example Request

```sh
curl -X GET "http://localhost:8000/components/verify"
```

### Example Response

```json
{
  "dependencies_verified": true
}
```

By using this endpoint, you can ensure that all component dependencies are verified and functioning correctly.
